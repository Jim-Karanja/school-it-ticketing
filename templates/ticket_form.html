{% extends "base.html" %}

{% block title %}Submit IT Ticket - School IT Helpdesk{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <h2>Submit an IT Support Request</h2>
        <p class="form-description">
            Having computer or technology issues? Fill out this form and our IT team will get back to you as soon as possible.
        </p>

        <form method="POST" action="{{ url_for('submit_ticket') }}" class="ticket-form">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                {{ form.user_name.label(class="form-label") }}
                {{ form.user_name(class="form-input") }}
                {% if form.user_name.errors %}
                    <ul class="form-errors">
                        {% for error in form.user_name.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.user_email.label(class="form-label") }}
                {{ form.user_email(class="form-input", placeholder="your.email@school.edu") }}
                {% if form.user_email.errors %}
                    <ul class="form-errors">
                        {% for error in form.user_email.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.pc_location.label(class="form-label") }}
                {{ form.pc_location(class="form-input", placeholder="e.g., Library Computer Lab, Room 205, Teacher's Office") }}
                {% if form.pc_location.errors %}
                    <ul class="form-errors">
                        {% for error in form.pc_location.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.problem_description.label(class="form-label") }}
                <p class="field-help">Please describe the problem in detail. Include any error messages, what you were trying to do, and when the issue started.</p>
                {{ form.problem_description(class="form-textarea", rows="6", placeholder="Example: The computer won't start. When I press the power button, nothing happens - no lights, no sounds. This started happening this morning.") }}
                {% if form.problem_description.errors %}
                    <ul class="form-errors">
                        {% for error in form.problem_description.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    {{ form.remote_access_requested() }}
                    <span class="checkmark"></span>
                    {{ form.remote_access_requested.label.text }}
                </label>
                <p class="field-help">
                    Checking this box allows our IT staff to remotely connect to your computer to diagnose and fix the issue more quickly.
                    You will receive instructions on how to enable this connection if needed.
                </p>
            </div>

            <div class="form-group submit-group">
                {{ form.submit(class="btn btn-primary") }}
            </div>
        </form>

        <div class="help-section">
            <h3>Need immediate help?</h3>
            <p>For urgent technical issues during school hours, you can also:</p>
            <ul>
                <li>Visit the IT office in Room 110</li>
                <li>Call extension 5555 from any school phone</li>
                <li>Email: it-support@school.edu</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
